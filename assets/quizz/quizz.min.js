function hideAll(){hidden("analysis-symptoms-survey-container-parent",!0),hidden("general-recommendations-gouv-covid19",!0),hidden("analysis-symptoms-results-test-covid19",!0),hidden("ecare-recommendations-generals-covid19",!0),$("#analysis-symptoms-results-test-covid19").empty(),hidden("evaluation-facteurs-risks-covid19",!0),hidden("loading-message",!0),hidden("btn-finish-survey",!0)}hideAll(),$(document).ready(function(e){let t="";const n=$("#final_loader"),i=$("#btn-move-next"),a=$("#move-previous-icon"),o=$("#btn-finish-survey"),s="survey-step-auto-";let r=$("#label-error-query-empty-fields");function c(){i.prop("disabled",!1),i.removeClass("btn-outline-info"),i.addClass("btn-info")}const d=$(".survey-step");let u=1,l="",p=0,h=0;const m=isMobile(),f=browserReportSync().os.name,g=m?26:100;function v(e){return void 0!==radioInputValue(e)}function y(){r.html("")}function k(){return $("#consommationCheckAlcohol").is(":checked")||$("#consommationCheckTobacco").is(":checked")||$("#consommationCheckWildAnimals").is(":checked")||$("#consommationCheckNone").is(":checked")}function b(){return $("#professionalInChargeOfCOVID19Patients").is(":checked")||$("#recentTravelToRiskyZone").is(":checked")||$("#contactWitConfirmedPatient").is(":checked")||$("#contactCaseNone").is(":checked")}function I(){switch(l){case"feverStep":return $("#feverDegreeCelsiusInput").focus(),v("feverRadio");case"feverDegreeCelsiusStep":return function(){if(!v("useThermometerRadio"))return r.html('Veillez indiquer si "Oui" ou "Non", votre sensation de fièvre a été confirmé par l\'utilisation d\'un Thermomètre.'),!1;if("true"===radioInputValue("useThermometerRadio")){if(validateInput("feverDegreeCelsiusInput")){const e=36,t=42,n=Number(value("feverDegreeCelsiusInput"));return!(n<e||n>t)||(r.html("La valeur de la température doit être entre 36 et 42 °Celsius."),!1)}return r.html("Entrez votre température."),!1}return!0}();case"coughStep":return v("coughRadio");case"looseTasteSmellStep":return v("looseTasteSmellRadio");case"soreThroatStep":return v("soreThroatRadio");case"chestPainStep":return v("chestPainRadio");case"diarrheaStep":return v("diarrheaRadio");case"puffinessStep":return v("puffinessRadio");case"shortOfBreathStep":return v("shortOfBreathRadio");case"breathLessStep":return v("breathLessRadio");case"tiredStep":return v("tiredRadio");case"pauseStep":return v("pauseRadio");case"bodyAchesStep":return v("bodyAchesRadio");case"genderStep":return v("genderRadio");case"cantFoodDrinkStep":return $("#ageInput").focus(),v("cantFoodDrinkRadio");case"ageStep":return function(){if(!validateInput("ageInput"))return r.html("Entrez votre âge."),!1;const e=Number(value("ageInput"));return e<1||e>120?(r.html("Votre âge doit être entre 1 an et 120 ans."),!1):(validateInput("heightInput"),$("#heightInput").focus(),!0)}();case"heightStep":return function(){if(!validateInput("heightInput"))return r.html("Entrez votre taille, en cm."),!1;const e=Number(value("heightInput"));return e<80||e>240?(r.html("Votre taille doit être entre 80 et 240 cm."),!1):(validateInput("weightInput"),$("#weightInput").focus(),!0)}();case"weightStep":return function(){if(!validateInput("weightInput"))return r.html("Entrez votre poids, en Kg."),!1;const e=Number(value("weightInput"));return!(e<20||e>250)||(r.html("Votre poids doit être entre 20 et 250 Kg."),!1)}();case"pregnantStep":return!!v("pregnantRadio")&&("true"!==radioInputValue("pregnantRadio")||v("thirdTrimesterPregnancyRadio"));case"highBloodPressureStep":return!!v("highBloodPressureRadio")&&(radioInputValue("highBloodPressureRadio"),!0);case"cancerStep":return v("cancerRadio");case"diseaseLungStep":return v("diseaseLungRadio");case"diseaseKidneyStep":return v("diseaseKidneyRadio");case"diseaseLiverStep":return v("diseaseLiverRadio");case"immunoDepressifStep":return v("immunoDepressifRadio");case"immunoSuppressantStep":return v("immunoSuppressantRadio");case"antiInflammatoryStep":return v("antiInflammatoryRadio");case"respectHygieneStep":return v("respectHygieneRadio");case"growsTeethStep":return v("growsTeethRadio");case"contactPersonStep":return b();case"consommationStep":return k();case"":default:return!0}}function R(){u>1&&I()&&function(){switch(l){case"highBloodPressureStep":return!("true"===radioInputValue("highBloodPressureRadio"));case"diseaseLungStep":return v("diseaseLungRadio");case"":default:return!0}}()&&P()}function S(){let e=new FormData;return $.each(["fever","cough","looseTasteSmell","soreThroat","chestPain","diarrhea","shortOfBreath","breathLess","tired","pause","cantFoodDrink","gender","pregnant","highBloodPressure","cancer","diseaseLung","diseaseKidney","diseaseLiver","immunoDepressif","immunoSuppressant","antiInflammatory","respectHygiene","useThermometer","thirdTrimesterPregnancy","growsTeeth","ovulationPeriod","bodyAches","puffiness"],function(t,n){v(n+"Radio")&&e.append(n,radioInputValue(n+"Radio"))}),$.each(["feverDegreeCelsius","age","height","weight"],function(t,n){isEmptyInput(n+"Input")||e.append(n,value(n+"Input"))}),"true"===radioInputValue("highBloodPressureRadio")&&(e.append("systolicPressureInput",value("systolicPressureInput")),e.append("diastolicPressureInput",value("diastolicPressureInput"))),k()&&(e.append("consumesAlcohol",$("#consommationCheckAlcohol").is(":checked")),e.append("consumesWildAnimals",$("#consommationCheckWildAnimals").is(":checked")),e.append("consumesTobacco",$("#consommationCheckTobacco").is(":checked"))),b()&&(e.append("professionalInChargeOfCOVID19Patients",$("#professionalInChargeOfCOVID19Patients").is(":checked")),e.append("recentTravelToRiskyZone",$("#recentTravelToRiskyZone").is(":checked")),e.append("contactWitConfirmedPatient",$("#contactWitConfirmedPatient").is(":checked"))),e.append("identifier",t),e.append("endSurvey",p===h),e.append("lastSurveyStep",p),e}function C(e){u>1&&$("html, body").animate({scrollTop:$("#survey-header-label").offset().top-g},"slow");let t=$("."+s+u);y(),d.prop("hidden",!0),t.prop("hidden",!1),d.removeClass("fadeInRight"),d.removeClass("fadeInLeft"),e?t.addClass("fadeInRight"):t.addClass("fadeInLeft"),l=t.attr("id"),p=t.data("step"),function(){const e=Number(p)/h*100;$("#dynamic").css("width",e+"%").attr("aria-valuenow",e),$("#label-step-progress-number").html(p+"/"+h)}()}function T(e){C(e),1===u?(i.html("Démarrer le Test"),a.prop("hidden",!0)):h===u?(i.prop("hidden",!0),o.prop("hidden",!1)):(i.html("Suivant"),a.prop("hidden",!1),i.prop("hidden",!1),o.prop("hidden",!0),u%5==0&&(isEmptyValue(t)?setTimeout(function(){$.ajax({url:"/COVID19/initSurveyInfo",type:"POST",data:{storageKey:getSessionLocalStorageInit(),identifier:t},success:function(e){ajaxResultIsOkay(e)&&(t=e.identifier)},error:function(e){}})},1200):setTimeout(function(){let e=S();$.ajax({url:"/COVID19/updateSurveyInfo",type:"POST",contentType:!1,processData:!1,data:e,success:function(e){},error:function(e){}})},1200)))}function P(){I()?(w(!0),function(){if(u===h)return o.prop("hidden",!1),void i.prop("hidden",!0);u+=1,T(!0)}()):isEmptyValue(r.html())&&r.html(function(){switch(l){case"":default:return"Répondez à la question posée (Choisissez au moins une option)."}}())}const V=3;function w(e){if(e)switch(l){case"feverStep":"false"===radioInputValue("feverRadio")&&++u;break;case"shortOfBreathStep":"false"===radioInputValue("shortOfBreathRadio")&&++u;break;case"tiredStep":"false"===radioInputValue("tiredRadio")&&++u;break;case"ageStep":(Number(value("ageInput"))>V||"false"===radioInputValue("feverRadio"))&&++u;break;case"genderStep":"male"===radioInputValue("genderRadio")&&u++;break;case"puffinessStep":"false"===radioInputValue("puffinessRadio")&&(u+=2)}else switch(l){case"coughStep":"false"===radioInputValue("feverRadio")&&--u;break;case"bodyAchesStep":"false"===radioInputValue("puffinessRadio")?u-=2:"false"===radioInputValue("shortOfBreathRadio")&&--u;break;case"cantFoodDrinkStep":"false"===radioInputValue("tiredRadio")&&--u;break;case"highBloodPressureStep":"male"===radioInputValue("genderRadio")&&u--;break;case"heightStep":(Number(value("ageInput"))>V||"false"===radioInputValue("feverRadio"))&&--u}}function D(){w(!1),function(){if(c(),1===u)return a.prop("hidden",!0),void i.prop("hidden",!1);--u,T(!1)}()}function O(){n.prop("hidden",!0)}function B(){d.each(function(e){h++,$(this).addClass(s+(e+1)),$(this).data("step",e+1)});const e=$("#recommendations-indication");"Windows"===f?e.html('Cliquez sur les éléments pour afficher les recommandations associées. (Glissez le curseur vers la droite pour afficher toutes les recommandations.<i><img style="width: 36px; !important; height: auto; !important;"        src="/public/images/ecare/svg/swipe.svg"></i>)'):e.html('Cliquez sur les éléments pour afficher les recommandations associées. (Glissez les élements (icônes) vers la gauche pour afficher toutes les recommandations.<i><img style="width: 36px; !important; height: auto; !important;"        src="/public/images/ecare/svg/swipe-left.svg"></i>)'),m||$("#label-auto-step").html("Questionnaire rapide et pertinent"),hideFeedbackFeature()}i.click(function(){P()}),a.click(function(){D()}),setTimeout(function(){B(),O(),hidden("header-progress-bar",!1),hidden("analysis-symptoms-survey-header-top",!1),hidden("analysis-symptoms-survey-container-parent",!1),hidden("analysis-symptoms-survey-container",!1),hidden("btn-move-next",!1),hidden("btn-finish-survey",!0),T(!0),i.prop("hidden",!1),resetInputs(),tippy(".tippy")},240),$("input[type=radio]").on("click change edit",function(){c(),y(),setTimeout(function(){R()},240)}),$("input[name='pregnantRadio']").on("click change edit",function(){"true"===radioInputValue("pregnantRadio")?hidden("thirdTrimesterPregnancyQuestion",!1):hidden("thirdTrimesterPregnancyQuestion",!0)}),$("input[name='useThermometerRadio']").on("click change edit",function(){"true"===radioInputValue("useThermometerRadio")?hidden("feverDegreeCelsiusQuestion",!1):hidden("feverDegreeCelsiusQuestion",!0)}),$("input[name='highBloodPressureRadio']").on("click change edit",function(){"true"===radioInputValue("highBloodPressureRadio")?hidden("highBloodPressureValues",!1):hidden("highBloodPressureValues",!0)}),$("input[type=checkbox]").on("click change edit",function(e){c(),y()}),$("input[type=number]").on("click change edit keyup",function(e){c(),y(),13===e.keyCode&&setTimeout(function(){R()},240)}),$("#consommationCheckNone").on("click change edit",function(){$(".consommation-cb").prop("checked",!1)}),$(".consommation-cb").on("click change edit",function(){$("#consommationCheckNone").prop("checked",!1)}),$("#contactCaseNone").on("click change edit",function(){$(".contactPerson-cb").prop("checked",!1)}),$(".contactPerson-cb").on("click change edit",function(){$("#contactCaseNone").prop("checked",!1)}),$("#stateWomanNone").on("click change edit",function(){$(".stateWoman-cb").prop("checked",!1)}),$(".stateWoman-cb").on("click change edit",function(){$("#stateWomanNone").prop("checked",!1)}),$("#ovulationPeriod").on("click change edit",function(){$("#menstrualPeriods").prop("checked",!1)}),$("#menstrualPeriods").on("click change edit",function(){$("#ovulationPeriod").prop("checked",!1)});const N=$("#evaluation-facteurs-risks-covid19"),x=$("#analysis-symptoms-results-test-covid19"),L=$("#general-recommendations-gouv-covid19"),A=$("#ecare-recommendations-generals-covid19");function W(e){let t='<div class="row card-shadow">'+e.resultMessage+'<a href="#evaluation-facteurs-risks-covid19"                           class="col-lg-6 btn btn-lg btn-block btn-outline-info">                            Nos recommandations pour vous. <i class="fa fa-arrow-circle-down"></i>                        </a>                     <a href=""                           class="col-lg-6 btn btn-lg btn-block btn-outline-success">                            Recommencer le Test <i class="fa fa-sync"></i>                     </a></div>';var n;x.append(t),tippy(".tippy"),n=e.factorsRisks,z.empty(),F.empty(),$.each(n,function(e,t){console.log(e);let n="0"===e;z.append('<div id="'+t.field+'-recommendation" class="'+(n?"active":"")+' risk-recommendation-header-element">                                    <i class="link-to-recommendation">                                        <img style="width: 72px; !important; height: auto; !important;"                                             src="/public/images/ecare/covid19/recommendations/svg/'+t.field+'.svg"                                        alt="'+t.name+' Icon">                                    </i>                                    <a class="link-to-recommendation" href="#!">                                        '+t.fr+"                                    </a>                                </div>"),F.append("<div "+(n?"":"hidden")+' class="risk-recommendation-body-element" id="'+t.field+'-recommendation-body">                                    <h4 class="center text-center">                                        '+t.fr+'                                    </h4><div class="recommendation-text-content">'+t.message+"</div></div>")}),z.append('<div id="plus-recommendation" class="risk-recommendation-header-element">                                    <i href="/covid19/recommendations" class="link-to-recommendation">                                        <img style="width: 72px; !important; height: auto; !important;"                                             src="/public/images/ecare/covid19/recommendations/svg/plus.svg"                                        alt="Plus de recommandations Icon">                                    </i>                                    <a class="link-to-recommendation" href="#!">                                        Voir toutes les recommandations                                    </a>                                </div>'),function(){const e=$(".risk-recommendation-header-element"),t=$(".risk-recommendation-body-element");$("#evaluation-facteurs-risks-covid19").on("click",".risk-recommendation-header-element",function(n){e.removeClass("active"),$(this).addClass("active");let i=$(this).attr("id");t.prop("hidden",!0),hidden(i+"-body",!1)})}(),O(),hidden("loading-message",!0),hidden("analysis-symptoms-results-container-parent",!0),N.prop("hidden",!1),L.prop("hidden",!1),A.prop("hidden",!1),x.prop("hidden",!1),_showFeedbackFeature()}const z=$("#evaluation-facteurs-risks-covid19-header"),F=$("#evaluation-facteurs-risks-covid19-body");z.on("click","#plus-recommendation",function(){window.open("/covid19/recommendations","_blank")}),o.click(function(e){e.preventDefault(),hidden("btn-finish-survey",!0),hidden("header-progress-bar",!0),hidden("analysis-symptoms-survey-header-top",!0),hidden("analysis-symptoms-survey-container-parent",!0),n.prop("hidden",!1),$("html, body").animate({scrollTop:$("#survey-header-label").offset().top-g},"slow"),function(){let e=S();$.ajax({url:"/COVID19/updateSurveyInfo",type:"POST",contentType:!1,processData:!1,data:e,success:function(e){$.ajax({url:"/COVID19/surveyTestSymptomsResultsAndActions/",type:"POST",data:{identifier:e.identifier},success:function(e){ajaxResultIsFail(e)?pNotifyResultWarn(e):(hidden("loading-message",!1),W(e))},error:function(e){}})},error:function(e){}})}()})});